<!DOCTYPE html>
<html lang="en">
  <head>
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="http://progressquest.com/favicon.ico"
    />
    <title>Play Progress Quest</title>
    <!-- 98.css library -->
    <link rel="stylesheet" href="https://unpkg.com/98.css" />
    <style>
      body {
        background: url("assets/darkaliens.png") no-repeat center center fixed;
        background-size: cover;
        font-family: "MS Sans Serif", sans-serif;
        margin: 0;
        padding: 0;
        min-height: 100vh;
        box-sizing: border-box;
        overflow: hidden;
      }

      /* Custom title bar color */
      .title-bar {
        background: #9acd32;
        background: linear-gradient(
          90deg,
          rgba(154, 205, 50, 1) 56%,
          rgba(255, 255, 255, 1) 100%
        );
      }
      .title-bar-text {
        color: black;
      }

      .main-container {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        padding: 20px;
        box-sizing: border-box;
      }

      .main-window {
        width: 640px;
        min-height: 300px;
      }

      .ascii-logo {
        font-family: "Courier New", monospace;
        font-size: 10px;
        line-height: 1;
        color: black;
        font-weight: bold;
        white-space: pre;
        text-align: left;
        margin: 0 auto 15px auto;
        letter-spacing: 0;
        word-spacing: 0;
        overflow: hidden;
        width: fit-content;
        max-width: 100%;
        min-height: 50px;
        visibility: hidden;
        margin-bottom: 0px;
        padding-bottom: 0px;
      }

      .subtitle {
        color: #404040;
        text-align: right;
        font-size: 11px;
        margin-bottom: 20px;
        visibility: hidden;
        margin-right: 90px;
      }

      .content-section {
        margin: 20px 0;
        margin-bottom: 0px;
      }

      .tech-specs-panel {
        min-height: 140px;
        margin-bottom: 20px;
      }

      .tech-specs-content {
        background: black;
        color: #00ff00;
        font-family: "Courier New", monospace;
        font-size: 10px;
        padding: 12px;
        height: 100%;
        min-height: 116px;
      }

      .tech-specs-content .spec-title {
        color: white;
        font-weight: bold;
        margin-bottom: 8px;
      }

      .tech-specs-content ul {
        margin: 0;
        padding-left: 20px;
        list-style-type: none;
      }

      .tech-specs-content li {
        margin-bottom: 4px;
        position: relative;
      }

      .tech-specs-content li:before {
        content: "â€¢ ";
        color: #9acd32;
        position: absolute;
        left: -15px;
      }

      .play-section {
        text-align: center;
        padding: 20px;
      }

      .play-button {
        font-size: 12px !important;
        font-weight: bold;
      }

      .play-button:disabled {
        color: #808080 !important;
        cursor: not-allowed;
      }

      .footer-section {
        text-align: right;
        color: #808080;
        font-size: 10px;
        padding: 2px;
        padding-top: 0px;
        margin-top: 0px;
        padding-bottom: 0px;
      }

      /* Custom window body styling */
      .window-body {
        padding: 20px;
        padding-bottom: 0px;
        margin-bottom: 0px;
      }

      /* Center the logo within the window */
      .header-content {
        text-align: center;
        margin-bottom: 20px;
      }
    </style>
  </head>

  <body>
    <div class="main-container">
      <div class="window main-window">
        <div class="title-bar">
          <div class="title-bar-text">Sneeder Quest - Welcome</div>
          <div class="title-bar-controls">
            <button aria-label="Close" onclick="window.close()"></button>
          </div>
        </div>

        <div class="window-body">
          <div class="header-content">
            <div class="ascii-logo" id="ascii-logo"></div>
            <div class="subtitle" id="subtitle">a fork of Progress Quest</div>
          </div>

          <div class="content-section">
            <fieldset class="tech-specs-panel">
              <legend>INFO</legend>
              <div class="tech-specs-content" id="tech-specs">
                <!-- Content will be animated in -->
              </div>
            </fieldset>

            <div class="play-section" id="play-section">
              <button
                class="play-button"
                onclick="window.location.href='roster.html'"
                disabled
                id="play-button"
              >
                START
              </button>
            </div>
          </div>
        </div>

        <div class="footer-section">a thing by camp</div>
      </div>
    </div>

    <!-- Load animation utility -->
    <script src="utils/animation.js"></script>

    <script>
      // Initialize animator
      const animator = new RetroAnimator();

      // Load ASCII art and start animation sequence
      async function loadAndAnimate() {
        try {
          const response = await fetch("assets/logo.txt");

          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }

          const asciiText = await response.text();

          // Define animation sequence
          const sequence = [
            {
              type: "typewriter-ascii",
              element: "ascii-logo",
              text: asciiText,
              speed: 15,
              postDelay: 500,
            },
            {
              type: "typewriter-text",
              element: "subtitle",
              text: "a fork of Progress Quest",
              speed: 50,
              postDelay: 500,
            },
            {
              type: "typewriter-structured",
              element: "tech-specs",
              structure: {
                title: "System Requirements",
                titleClass: "spec-title",
                titleDelay: 300,
                items: [
                  "SneedScript v1 or above",
                  "At least 32GB of Dedotated Wam",
                  "All Ports Forwarded",
                  "4k 300hz display (minimum)",
                  "One confirmed purchase at BuyHeroinDirect.com",
                  "Stamped Internet Passport",
                ],
                itemDelay: 100,
              },
              speed: 30,
              postDelay: 500,
            },
            {
              type: "custom",
              callback: () => {
                const playButton = document.getElementById("play-button");
                playButton.disabled = false;
              },
            },
          ];

          // Run the animation sequence
          await animator.runSequence(sequence);
        } catch (error) {
          console.error("Error loading logo:", error);
        }
      }

      // Start when page loads
      document.addEventListener("DOMContentLoaded", loadAndAnimate);
    </script>
  </body>
</html>
