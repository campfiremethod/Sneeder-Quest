<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Sneeder Quest</title>

    <!-- âœ… Set this statically â€” do NOT inject it with JS -->
    <!-- ðŸ‘‡ðŸ‘‡ðŸ‘‡ðŸ‘‡ CHANGE THIS VALUE FOR LOCALHOST OR DEPLOYED ENV ðŸ‘‡ðŸ‘‡ðŸ‘‡ðŸ‘‡ -->
    <base href="/sneederquest/" />

    <link rel="shortcut icon" href="assets/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="https://unpkg.com/98.css" />
    <link rel="stylesheet" href="styles/index.css" />
    <script src="utils/animation.js"></script>
  </head>

  <body>
    <div class="main-container">
      <div class="window main-window">
        <div class="title-bar">
          <div class="title-bar-text">Sneeder Quest - Welcome</div>
          <div class="title-bar-controls">
            <button aria-label="Close" onclick="window.close()"></button>
          </div>
        </div>

        <div class="window-body">
          <div class="header-content">
            <div class="ascii-logo" id="ascii-logo"></div>
            <div class="subtitle" id="subtitle">a fork of Progress Quest</div>
          </div>

          <div class="content-section">
            <fieldset class="tech-specs-panel">
              <legend>INFO</legend>
              <div class="tech-specs-content" id="tech-specs"></div>
            </fieldset>

            <div class="play-section" id="play-section">
              <button
                class="play-button"
                onclick="window.location.href='roster.html'"
                disabled
                id="play-button"
              >
                START
              </button>
            </div>
          </div>
        </div>

        <div class="footer-section">a thing by camp</div>
      </div>
    </div>

    <script>
      const animator = new RetroAnimator();

      async function loadAndAnimate() {
        try {
          const response = await fetch("assets/logo.txt");
          if (!response.ok)
            throw new Error(`HTTP error! status: ${response.status}`);
          const asciiText = await response.text();

          const sequence = [
            {
              type: "typewriter-ascii",
              element: "ascii-logo",
              text: asciiText,
              speed: 15,
              postDelay: 500,
            },
            {
              type: "typewriter-text",
              element: "subtitle",
              text: "a fork of Progress Quest",
              speed: 50,
              postDelay: 500,
            },
            {
              type: "typewriter-structured",
              element: "tech-specs",
              structure: {
                title: "System Requirements",
                titleClass: "spec-title",
                titleDelay: 300,
                items: [
                  "SneedScript v1 or above",
                  "At least 32GB of Dedotated Wam",
                  "All Ports Forwarded",
                  "4k 300hz display (minimum)",
                  "One confirmed purchase at BuyHeroinDirect.com",
                  "Stamped Internet Passport",
                ],
                itemDelay: 100,
              },
              speed: 30,
              postDelay: 500,
            },
            {
              type: "custom",
              callback: () => {
                document.getElementById("play-button").disabled = false;
              },
            },
          ];

          await animator.runSequence(sequence);
        } catch (error) {
          console.error("Error loading logo:", error);
        }
      }

      document.addEventListener("DOMContentLoaded", loadAndAnimate);
    </script>
  </body>
</html>
